<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=generator content="Hugo Blox Builder 5.9.6"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" media=print onload='this.media="all"'><link rel=stylesheet href=../../../css/vendor-bundle.min.047268c6dd09ad74ba54a0ba71837064.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1.9.4/css/academicons.min.css integrity="sha512-IW0nhlW5MgNydsXJO40En2EoCkTTjZhI3yuODrZIc8cQ4h1XcF53PsqDHa09NqnkXuIe0Oiyyj171BqZFwISBw==" crossorigin=anonymous media=print onload='this.media="all"'><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.min.css integrity crossorigin=anonymous media=print onload='this.media="all"'><link rel=stylesheet href=../../../css/wowchemy.8351f916aaad8b2220b510ab2f5f7304.css><link rel=stylesheet href=../../../css/libs/chroma/github-dark.min.css title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=../../../css/libs/chroma/github-dark.min.css title=hl-dark media=print onload='this.media="all"' disabled><meta name=description content="For a long time, the Calypso card product range was limited to ‚ÄòCalypso Prime‚Äô, in order to cater for season ticket holders and regular travellers. But to manage &lsquo;occasional&rsquo; travelers with single or limited-use card products, many ticketing systems used contactless memory ticketing solutions (such as Mifare UL, CT512, ST25) in addition to Calypso cards."><link rel=alternate hreflang=en-us href=https://keyple-support.calypsonet.org/add-ons/card-ext/storage-card/><link rel=canonical href=https://keyple-support.calypsonet.org/add-ons/card-ext/storage-card/><link rel=manifest href=../../../manifest.webmanifest><link rel=icon type=image/png href=../../../media/icon_huceb5ed780c823eaac47da25fabbbc8be_2207_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=../../../media/icon_huceb5ed780c823eaac47da25fabbbc8be_2207_180x180_fill_lanczos_center_3.png><meta name=theme-color content="#039efd"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://keyple-support.calypsonet.org/media/logo.svg"><meta property="og:type" content="article"><meta property="og:site_name" content="Calypso Networks Association Keyple Support"><meta property="og:url" content="https://keyple-support.calypsonet.org/add-ons/card-ext/storage-card/"><meta property="og:title" content="CNA member Keyple extension to manage contactless memory ticket solutions | Calypso Networks Association Keyple Support"><meta property="og:description" content="For a long time, the Calypso card product range was limited to ‚ÄòCalypso Prime‚Äô, in order to cater for season ticket holders and regular travellers. But to manage &lsquo;occasional&rsquo; travelers with single or limited-use card products, many ticketing systems used contactless memory ticketing solutions (such as Mifare UL, CT512, ST25) in addition to Calypso cards."><meta property="og:image" content="https://keyple-support.calypsonet.org/media/logo.svg"><meta property="og:locale" content="en-us"><meta property="article:modified_time" content="2025-06-30T16:00:26+02:00"><title>CNA member Keyple extension to manage contactless memory ticket solutions | Calypso Networks Association Keyple Support</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=68a2d008103d70ab8258823ded42c1bf><script src=../../../js/wowchemy-init.min.d66af272089c6c0601f1a57edc3bf6ab.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class=col-6><h1>Search</h1></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=Close><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box><input name=q id=search-query placeholder=Search... autocapitalize=off autocomplete=off autocorrect=off spellcheck=false type=search class=form-control aria-label=Search...></div></section><section class=section-search-results><div id=search-hits></div></section></div></aside><div class="page-header header--fixed"><header><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=../../../><img src=../../../media/logo.svg alt="Calypso Networks Association Keyple Support"></a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label="Toggle navigation">
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=../../../><img src=../../../media/logo.svg alt="Calypso Networks Association Keyple Support"></a></div><div class="navbar-collapse main-menu-item collapse justify-content-end" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=../../../basics/><span>Keyple Basics</span></a></li><li class=nav-item><a class="nav-link active" href=../../../add-ons/><span>Keyple Add-ons</span></a></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=Search><i class="fas fa-search" aria-hidden=true></i></a></li></ul></div></nav></header></div><div class=page-body><div class="container-fluid docs"><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 docs-sidebar"><form class="docs-search d-flex align-items-center"><button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation"><div class=d-flex><span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">Keyple card extensions
</span><span><i class="fas fa-chevron-down"></i></span></div></button>
<button class="form-control sidebar-search js-search d-none d-md-flex">
<i class="fas fa-search pr-2"></i>
<span class=sidebar-search-text>Search...</span>
<span class=sidebar-search-shortcut>/</span></button></form><nav class="collapse docs-links" id=docs-nav><ul class="nav docs-sidenav"><li><a href=../../../add-ons/></a></li><div class=docs-toc-item><a class=docs-toc-link href=../../../add-ons/demo/>Keyple Demonstrators</a><ul class="nav docs-sidenav"><li><a href=../../../add-ons/demo/ticketing/>üåç Advanced Ticketing</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=../../../add-ons/plugin-ext/>Keyple reader extensions</a><ul class="nav docs-sidenav"><li><a href=../../../add-ons/plugin-ext/coppernic/>üåç Coppernic plugin</a></li><li><a href=../../../add-ons/plugin-ext/famoco/>üåç Famoco plugin</a></li><li><a href=../../../add-ons/plugin-ext/flowbird/>üåç Flowbird plugin</a></li><li><a href=../../../add-ons/plugin-ext/bluebird/>üåç Bluebird plugin</a></li><li><a href=../../../add-ons/plugin-ext/hsm/>üåç Spirtech Calypso HSM</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=../../../add-ons/card-ext/>Keyple card extensions</a><ul class="nav docs-sidenav"><li class=active><a href=../../../add-ons/card-ext/storage-card/>üö´ Storage Card</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=../../../add-ons/tool/>Keyple-based Assistance Tools</a><ul class="nav docs-sidenav"><li><a href=../../../add-ons/tool/card-audit/>üåç Card Configuration Audit</a></li><li><a href=../../../add-ons/tool/basic-card/>üö´ Basic Card Personalizer</a></li><li><a href=../../../add-ons/tool/basic-sam/>üö´ Basic SAM Personalizer</a></li></ul></div></ul></nav></div><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>Contents</a></li></ul><nav id=TableOfContents><ul><li><a href=#involved-software-components>Involved software components</a></li><li><a href=#terminal-interface-to-drive-a-transaction-with-contactless-memory-tickets>Terminal Interface to drive a transaction with contactless memory tickets</a></li><li><a href=#keypop-api-to-drive-a-transaction-with-contactless-memory-tickets>Keypop API to drive a transaction with contactless memory tickets</a></li><li><a href=#cna-library-to-process-contactless-memory-tickets>CNA Library to process contactless memory tickets</a></li><li><a href=#reader-support-for-contactless-memory-tickets>Reader support for contactless memory tickets</a><ul><li><a href=#native-support-of-contactless-memory-tickets-by-pcsc-readers>Native support of contactless memory tickets by PC/SC readers</a></li><li><a href=#keyple-interface-for-extending-a-plugin-to-manage-memory-ticket-command-wrapping>Keyple interface for extending a plugin to manage memory ticket command wrapping</a></li><li><a href=#cna-library-to-add-contactless-memory-ticket-command-wrapping-to-keyple-plugins>CNA Library to add contactless memory ticket command wrapping to Keyple plugins</a></li></ul></li><li><a href=#example-of-a-terminal-application-processing-contactless-memory-tickets>example of a terminal application processing contactless memory tickets</a></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role=main><div class=docs-article-container></div><div class=docs-article-container><h1>CNA member Keyple extension to manage contactless memory ticket solutions</h1><article class=article-style><br><p>For a long time, the Calypso card product range was limited to ‚ÄòCalypso Prime‚Äô, in order to cater for season ticket holders and regular travellers. But to manage &lsquo;occasional&rsquo; travelers with single or limited-use card products, many ticketing systems used contactless memory ticketing solutions (such as Mifare UL, CT512, ST25) in addition to Calypso cards. Since then, the Calypso card range has been expanded with the Calypso Light and Calypso Basic solutions.
Pending migration to support Light and Basic products, many ticketing systems still require their terminals to handle Calypso cards alongside contactless memory ticket solutions. To assist CNA members and facilitate the management of contactless memory tickets on Calypso terminals based on the Keyple middleware: CNA offers its members the privilege of benefiting from Keyple extensions enabling them to process contactless memory tickets.</p><ul><li>üåç All the APIs needed to support memory tickets are open source and hosted by the Keypop and Keyple projects.</li><li>üåç CNA also offers open source examples of contactless memory ticket processing.</li><li>üö´ Only CNA members can benefit from CNA libraries supporting contactless memory ticket processing.</li></ul><h2 id=involved-software-components>Involved software components</h2><p>In addition to the <a href=https://keyple.org/components/overview/components-map/ target=_blank rel=noopener>Keyple global component dependency guide</a>, the diagram below focuses on the components involved in handling contactless memory tickets.<figure><div class="d-flex justify-content-center"><div class=w-100><img src=../../../media/cna-storagecard-support/storagecard_component_dependencies.svg alt loading=lazy data-zoomable></div></div></figure></p><h2 id=terminal-interface-to-drive-a-transaction-with-contactless-memory-tickets>Terminal Interface to drive a transaction with contactless memory tickets</h2><p>In order to facilitate the design of ticketing processing on a terminal interacting with contactless memory tickets, CNA has defined a dedicated universal interface: the <a href=https://terminal-api.calypsonet.org/specifications/card-layer-storagecard/storagecard-api/ target=_blank rel=noopener>Storage Card API</a>.</p><h2 id=keypop-api-to-drive-a-transaction-with-contactless-memory-tickets>Keypop API to drive a transaction with contactless memory tickets</h2><p>An open source <a href=https://keypop.org/apis/card-layer-storagecard/storagecard-api/ target=_blank rel=noopener>Java translation of the Storage Card API</a> definition has been released within the Eclipse Keypop project.</p><h2 id=cna-library-to-process-contactless-memory-tickets>CNA Library to process contactless memory tickets</h2><p>In order to assist CNA members who need to combine Calypso card processing with contactless memory ticket processing on their Keyple-based ticketing terminals, CNA provides its members with a dedicated card extension: the <a href=https://github.com/calypsonet/keyple-card-cna-storagecard-java-lib target=_blank rel=noopener>CNA Storage Card Lib</a>.</p><h2 id=reader-support-for-contactless-memory-tickets>Reader support for contactless memory tickets</h2><p>To integrate smart card reader solutions with the Keyple middleware in a generic way, until now the Keyple project offered a simple plugin interface</p><ul><li>This <a href=https://keyple.org/components/core/keyple-plugin-api/ target=_blank rel=noopener>Keyple Plugin API</a> needs to be implemented by a specific plugin for the various reader solutions.</li><li>A <a href=https://keyple.org/learn/developer-guide/reader-plugin-add-on/ target=_blank rel=noopener>guide to developing plugins</a> for reader solutions is also provided by the Keyple project.</li></ul><p>Proprietary contactless ticket solutions do not support the level 4 of the ISO 14443 standard: these solutions are therefore not compatible with the ‚ÄúAPDU command‚Äù envelope format defined by the ISO 7816-4 standard. Communication with contactless tickets therefore relies on exchanges of non-standardized ‚Äúbyte blocks‚Äù: specific processing by reader solutions is required to handle memory tickets.</p><h3 id=native-support-of-contactless-memory-tickets-by-pcsc-readers>Native support of contactless memory tickets by PC/SC readers</h3><p>The PC/SC standard has defined an <a href=https://pcscworkgroup.com/Download/Specifications/pcsc3_v2.01.09.pdf target=_blank rel=noopener>APDU &lsquo;Storage Card&rsquo; envelope format</a> to standardize the way data blocks are exchanged with contactless memory tickets. This envelope format is used by the Storage Card library proposed by CNA.
Thus, the <a href=https://keyple.org/components/standard-reader-plugins/keyple-plugin-pcsc-lib/ target=_blank rel=noopener>PC/SC plugin</a> proposed by the Keyple project is natively compliant to support communication with contactless memory tickets.</p><h3 id=keyple-interface-for-extending-a-plugin-to-manage-memory-ticket-command-wrapping>Keyple interface for extending a plugin to manage memory ticket command wrapping</h3><p>To support contactless memory tickets on Keyple terminals using reader solutions other than PC/SC, the reader plugin needs to manage the APDU wrapping of command blocks specific to contactless ticket solutions.
To facilitate and factorize the integration of APDU wrapping for plugins for reader solutions other than PC/SC, the Keyple project offers an additional API: the &lsquo;<a href=https://keyple.org/components/core/keyple-plugin-storagecard-api/ target=_blank rel=noopener>Plugin Storage Card API</a>&rsquo;.</p><p>A reader plugin that uses this API can then be extended to support contactless memory tickets if it is interfaced with a library implementing this API.</p><ul><li>In the Keyple project, the <a href=https://github.com/eclipse-keyple/keyple-plugin-android-nfc-java-lib/tree/storage-card-api target=_blank rel=noopener>Android NFC plugin</a> has been updated to use this interface, enabling an NFC reader to integrate support for Mifare UltraLight tickets (as CT512 or ST25 products are not part of the NFC standard). (feature currently available in the ‚Äòstorage-card-api‚Äô branch, integration in progress in the main branch)</li><li>Among the Keyple &lsquo;add-ons&rsquo; offered by CNA, the open source <a href=https://github.com/calypsonet/keyple-plugin-cna-bluebird-specific-nfc-java-lib/tree/storagecard target=_blank rel=noopener>plugin for Bluebird readers</a> has also evolved to use this API and thus support Mifare UL, CT512, and ST25 tickets (feature currently available in the ‚Äòstoragecard‚Äô branch, integration in progress in the main branch)</li></ul><h3 id=cna-library-to-add-contactless-memory-ticket-command-wrapping-to-keyple-plugins>CNA Library to add contactless memory ticket command wrapping to Keyple plugins</h3><p>To assist CNA members needing to integrate contactless memory ticket processing on a Keyple-based terminal with readers other than PC/SC: CNA provides a members-only library that enables APDU wrapping of ticket commands to be integrated into a Keyple plugin: the <a href=https://github.com/calypsonet/keyple-plugin-cna-storagecard-java-lib target=_blank rel=noopener>Plugin Storage Card library</a>.</p><h2 id=example-of-a-terminal-application-processing-contactless-memory-tickets>example of a terminal application processing contactless memory tickets</h2><p>All the applications of the CNA advanced ticketing demonstrator will be updated to integrate the processing of contactless ticketing solutions in addition to Calypso cards.</p><ul><li>The first application to integrate this support is the distributed ticket reloading service (for the time being in the &lsquo;storagecard&rsquo; branch).<ul><li><a href=https://github.com/calypsonet/keyple-demo-ticketing-reloading-remote/blob/storagecard/client/keyple-mobile-android/app/src/main/kotlin/org/calypsonet/keyple/demo/reload/remote/domain/TicketingService.kt#L65 target=_blank rel=noopener>contactless ticket memory selection</a></li><li><a href=https://github.com/calypsonet/keyple-demo-ticketing-reloading-remote/blob/storagecard/server/src/main/java/org/calypsonet/keyple/demo/reload/remote/server/card/CardRepository.java#L207 target=_blank rel=noopener>contactless memory ticket data writing</a></li></ul></li></ul></article><div class=article-widget><div class=post-nav></div></div></div><div class=body-footer><p>Last updated on 2025-06-30</p></div><footer class=site-footer><p class="powered-by copyright-license-text">¬© 2025 Calypso Networks Association. All Rights Reserved.</p><p class=powered-by id=template-info>Published with <a href="https://hugoblox.com/?utm_campaign=poweredby" target=_blank rel=noopener>Hugo Blox Builder</a> ‚Äî the free, <a href=https://github.com/HugoBlox/hugo-blox-builder target=_blank rel=noopener>open source</a> website builder that empowers creators.</p></footer></main></div></div></div><div class=page-footer></div><script src=../../../js/vendor-bundle.min.938a3a7554cd9f6602290411f64d2617.js></script><script src=https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.min.js integrity crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/anchor-js@5.0.0/anchor.min.js integrity="sha256-aQmOEF2ZD4NM/xt4hthzREIo/2PFkOX/g01WjxEV7Ys=" crossorigin=anonymous></script><script>anchors.add()</script><script id=search-hit-fuse-template type=text/x-template>
    <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
    </div>
  </script><script src=https://cdn.jsdelivr.net/gh/krisk/Fuse@v3.2.1/dist/fuse.min.js integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/gh/julmot/mark.js@8.11.1/dist/jquery.mark.min.js integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin=anonymous></script><script id=page-data type=application/json>{"use_headroom":false}</script><script src=../../../en/js/wowchemy.min.cd171e256fbfbab870da20c293a852f5.js></script><script src=../../../js/wowchemy-map.a26e9d2f7238ba5b868384f1c5bc6477.js type=module></script><link rel=stylesheet href=https://cdn.datatables.net/1.11.3/css/dataTables.bootstrap4.min.css><script src=https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js></script><script src=https://cdn.datatables.net/1.11.3/js/dataTables.bootstrap4.min.js></script></body></html>